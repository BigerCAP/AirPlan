---
title: HMS 服务上一些基础信息
date: 2023-10-18T00:00:00+08:00
lastmod: 2023-10-19T00:00:00+08:00
categories:
  - software
tags:
  - Hive
  - metastore
---

## 获取表/分区最后变更时间

https://stackoverflow.com/questions/41468759/how-can-i-find-last-modified-timestamp-for-a-table-in-hive

```
time_column=`beeline --hivevar db=hiveDatabase --hivevar tab=hiveTable --silent=true --showHeader=false --outputformat=tsv2 -e 'show create table ${db}.${tab}' | egrep 'transient_lastDdlTime'`
time_value=`echo $time_column | sed 's/[|,)]//g' | awk -F '=' '{print $2}' | sed "s/'//g"`
tran_date=`date -d @$time_value +'%Y-%m-%d %H:%M:%S'`
echo $tran_date
```

Spark 介绍的 `desc EXTENDED` 语法
https://spark.apache.org/docs/3.0.0/sql-ref-syntax-aux-describe-table.html


### 获取表最后变更时间


通过 `describe EXTENDED hi.b;` 主要是获取 transient_lastDdlTime 信息，信息为 1697625441 ，Wed Oct 18 18:37:21 CST 2023

```sql
describe EXTENDED hi.b;
INFO  : Compiling command(queryId=hive_20231018105446_67d4e24f-745e-48fd-9823-142890a854a4): describe EXTENDED hi.b
INFO  : Concurrency mode is disabled, not creating a lock manager
INFO  : Semantic Analysis Completed (retrial = false)
INFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:col_name, type:string, comment:from deserializer), FieldSchema(name:data_type, type:string, comment:from deserializer), FieldSchema(name:comment, type:string, comment:from deserializer)], properties:null)
INFO  : Completed compiling command(queryId=hive_20231018105446_67d4e24f-745e-48fd-9823-142890a854a4); Time taken: 0.018 seconds
INFO  : Concurrency mode is disabled, not creating a lock manager
INFO  : Executing command(queryId=hive_20231018105446_67d4e24f-745e-48fd-9823-142890a854a4): describe EXTENDED hi.b
INFO  : Starting task [Stage-0:DDL] in serial mode
INFO  : Completed executing command(queryId=hive_20231018105446_67d4e24f-745e-48fd-9823-142890a854a4); Time taken: 0.031 seconds
INFO  : OK
INFO  : Concurrency mode is disabled, not creating a lock manager
+-----------------------------+----------------------------------------------------+----------+
|          col_name           |                     data_type                      | comment  |
+-----------------------------+----------------------------------------------------+----------+
| a                           | int                                                |          |
| dt                          | string                                             | 日期分区     |
|                             | NULL                                               | NULL     |
| # Partition Information     | NULL                                               | NULL     |
| # col_name                  | data_type                                          | comment  |
| dt                          | string                                             | 日期分区     |
|                             | NULL                                               | NULL     |
| Detailed Table Information  | Table(tableName:b, dbName:hi, owner:hive, createTime:1697625441, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[FieldSchema(name:a, type:int, comment:null), FieldSchema(name:dt, type:string, comment:日期分区)], location:file:/user/hive/warehouse/hi.db/b, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, skewedInfo:SkewedInfo(skewedColNames:[], skewedColValues:[], skewedColValueLocationMaps:{}), storedAsSubDirectories:false), partitionKeys:[FieldSchema(name:dt, type:string, comment:日期分区)], parameters:{totalSize=5, numRows=1, rawDataSize=4, COLUMN_STATS_ACCURATE={\"BASIC_STATS\":\"true\"}, numFiles=1, numPartitions=1, transient_lastDdlTime=1697625441, bucketing_version=2}, viewOriginalText:null, viewExpandedText:null, tableType:MANAGED_TABLE, rewriteEnabled:false, catName:hive, ownerType:USER) |          |
+-----------------------------+----------------------------------------------------+----------+
8 rows selected (0.074 seconds)
```


### 获取分区表最后变更时间

通过 `describe EXTENDED hi.b partition(dt=1);` 主要是获取 transient_lastDdlTime 信息，信息为 1697625501，Wed Oct 18 18:38:21 CST 2023

```sql

describe EXTENDED hi.b partition(dt=1);
INFO  : Compiling command(queryId=hive_20231018105439_d1fbfd98-88cd-4d45-917e-3126d86f48e7): describe EXTENDED hi.b partition(dt=1)
INFO  : Concurrency mode is disabled, not creating a lock manager
INFO  : Semantic Analysis Completed (retrial = false)
INFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:col_name, type:string, comment:from deserializer), FieldSchema(name:data_type, type:string, comment:from deserializer), FieldSchema(name:comment, type:string, comment:from deserializer)], properties:null)
INFO  : Completed compiling command(queryId=hive_20231018105439_d1fbfd98-88cd-4d45-917e-3126d86f48e7); Time taken: 0.092 seconds
INFO  : Concurrency mode is disabled, not creating a lock manager
INFO  : Executing command(queryId=hive_20231018105439_d1fbfd98-88cd-4d45-917e-3126d86f48e7): describe EXTENDED hi.b partition(dt=1)
INFO  : Starting task [Stage-0:DDL] in serial mode
INFO  : Completed executing command(queryId=hive_20231018105439_d1fbfd98-88cd-4d45-917e-3126d86f48e7); Time taken: 0.031 seconds
INFO  : OK
INFO  : Concurrency mode is disabled, not creating a lock manager
+---------------------------------+----------------------------------------------------+----------+
|            col_name             |                     data_type                      | comment  |
+---------------------------------+----------------------------------------------------+----------+
| a                               | int                                                |          |
| dt                              | string                                             | 日期分区     |
|                                 | NULL                                               | NULL     |
| # Partition Information         | NULL                                               | NULL     |
| # col_name                      | data_type                                          | comment  |
| dt                              | string                                             | 日期分区     |
|                                 | NULL                                               | NULL     |
| Detailed Partition Information  | Partition(values:[1], dbName:hi, tableName:b, createTime:0, lastAccessTime:0, sd:StorageDescriptor(cols:[FieldSchema(name:a, type:int, comment:null), FieldSchema(name:dt, type:string, comment:日期分区)], location:file:/user/hive/warehouse/hi.db/b/dt=1, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, skewedInfo:SkewedInfo(skewedColNames:[], skewedColValues:[], skewedColValueLocationMaps:{}), storedAsSubDirectories:false), parameters:{totalSize=5, numRows=1, rawDataSize=4, COLUMN_STATS_ACCURATE={"BASIC_STATS":"true","COLUMN_STATS":{"a":"true"}}, numFiles=1, transient_lastDdlTime=1697625501}, catName:hive) |          |
+---------------------------------+----------------------------------------------------+----------+
8 rows selected (0.165 seconds)
```


## HMS 3.1.3 所有表结构

共计 73 张

```SQL
CREATE TABLE public."CDS" (
	"CD_ID" int8 NOT NULL,
	CONSTRAINT "CDS_pkey" PRIMARY KEY ("CD_ID")
);
CREATE TABLE public."CTLGS" (
	"CTLG_ID" int8 NOT NULL,
	"NAME" varchar(256) NULL,
	"DESC" varchar(4000) NULL,
	"LOCATION_URI" varchar(4000) NOT NULL,
	CONSTRAINT "CTLGS_NAME_key" UNIQUE ("NAME"),
	CONSTRAINT "CTLGS_pkey" PRIMARY KEY ("CTLG_ID")
);
CREATE TABLE public."DELEGATION_TOKENS" (
	"TOKEN_IDENT" varchar(767) NOT NULL,
	"TOKEN" varchar(767) NULL,
	CONSTRAINT "DELEGATION_TOKENS_pkey" PRIMARY KEY ("TOKEN_IDENT")
);
CREATE TABLE public."GLOBAL_PRIVS" (
	"USER_GRANT_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"USER_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "GLOBALPRIVILEGEINDEX" UNIQUE ("AUTHORIZER", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "USER_PRIV", "GRANTOR", "GRANTOR_TYPE"),
	CONSTRAINT "GLOBAL_PRIVS_pkey" PRIMARY KEY ("USER_GRANT_ID")
);
CREATE TABLE public."KEY_CONSTRAINTS" (
	"CHILD_CD_ID" int8 NULL,
	"CHILD_INTEGER_IDX" int8 NULL,
	"CHILD_TBL_ID" int8 NULL,
	"PARENT_CD_ID" int8 NULL,
	"PARENT_INTEGER_IDX" int8 NOT NULL,
	"PARENT_TBL_ID" int8 NOT NULL,
	"POSITION" int8 NOT NULL,
	"CONSTRAINT_NAME" varchar(400) NOT NULL,
	"CONSTRAINT_TYPE" int2 NOT NULL,
	"UPDATE_RULE" int2 NULL,
	"DELETE_RULE" int2 NULL,
	"ENABLE_VALIDATE_RELY" int2 NOT NULL,
	"DEFAULT_VALUE" varchar(400) NULL,
	CONSTRAINT "KEY_CONSTRAINTS_pkey" PRIMARY KEY ("CONSTRAINT_NAME", "POSITION")
);
CREATE INDEX "CONSTRAINTS_CONSTRAINT_TYPE_INDEX" ON public."KEY_CONSTRAINTS" USING btree ("CONSTRAINT_TYPE");
CREATE INDEX "CONSTRAINTS_PARENT_TBLID_INDEX" ON public."KEY_CONSTRAINTS" USING btree ("PARENT_TBL_ID");
CREATE TABLE public."MASTER_KEYS" (
	"KEY_ID" serial4 NOT NULL,
	"MASTER_KEY" varchar(767) NULL,
	CONSTRAINT "MASTER_KEYS_pkey" PRIMARY KEY ("KEY_ID")
);
CREATE TABLE public."METASTORE_DB_PROPERTIES" (
	"PROPERTY_KEY" varchar(255) NOT NULL,
	"PROPERTY_VALUE" varchar(1000) NOT NULL,
	"DESCRIPTION" varchar(1000) NULL,
	CONSTRAINT "PROPERTY_KEY_PK" PRIMARY KEY ("PROPERTY_KEY")
);
CREATE TABLE public."MV_CREATION_METADATA" (
	"MV_CREATION_METADATA_ID" int8 NOT NULL,
	"CAT_NAME" varchar(256) NOT NULL,
	"DB_NAME" varchar(128) NOT NULL,
	"TBL_NAME" varchar(256) NOT NULL,
	"TXN_LIST" text NULL,
	"MATERIALIZATION_TIME" int8 NOT NULL,
	CONSTRAINT "MV_CREATION_METADATA_PK" PRIMARY KEY ("MV_CREATION_METADATA_ID")
);
CREATE INDEX "MV_UNIQUE_TABLE" ON public."MV_CREATION_METADATA" USING btree ("TBL_NAME", "DB_NAME");
CREATE TABLE public."NOTIFICATION_LOG" (
	"NL_ID" int8 NOT NULL,
	"EVENT_ID" int8 NOT NULL,
	"EVENT_TIME" int4 NOT NULL,
	"EVENT_TYPE" varchar(32) NOT NULL,
	"CAT_NAME" varchar(256) NULL,
	"DB_NAME" varchar(128) NULL,
	"TBL_NAME" varchar(256) NULL,
	"MESSAGE" text NULL,
	"MESSAGE_FORMAT" varchar(16) NULL,
	CONSTRAINT "NOTIFICATION_LOG_pkey" PRIMARY KEY ("NL_ID")
);
CREATE TABLE public."NOTIFICATION_SEQUENCE" (
	"NNI_ID" int8 NOT NULL,
	"NEXT_EVENT_ID" int8 NOT NULL,
	CONSTRAINT "NOTIFICATION_SEQUENCE_pkey" PRIMARY KEY ("NNI_ID")
);
CREATE TABLE public."NUCLEUS_TABLES" (
	"CLASS_NAME" varchar(128) NOT NULL,
	"TABLE_NAME" varchar(128) NOT NULL,
	"TYPE" varchar(4) NOT NULL,
	"OWNER" varchar(2) NOT NULL,
	"VERSION" varchar(20) NOT NULL,
	"INTERFACE_NAME" varchar(255) NULL DEFAULT NULL::character varying,
	CONSTRAINT "NUCLEUS_TABLES_pkey" PRIMARY KEY ("CLASS_NAME")
);
CREATE TABLE public."PARTITION_EVENTS" (
	"PART_NAME_ID" int8 NOT NULL,
	"CAT_NAME" varchar(256) NULL,
	"DB_NAME" varchar(128) NULL,
	"EVENT_TIME" int8 NOT NULL,
	"EVENT_TYPE" int4 NOT NULL,
	"PARTITION_NAME" varchar(767) NULL,
	"TBL_NAME" varchar(256) NULL,
	CONSTRAINT "PARTITION_EVENTS_pkey" PRIMARY KEY ("PART_NAME_ID")
);
CREATE INDEX "PARTITIONEVENTINDEX" ON public."PARTITION_EVENTS" USING btree ("PARTITION_NAME");
CREATE TABLE public."ROLES" (
	"ROLE_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"OWNER_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"ROLE_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "ROLEENTITYINDEX" UNIQUE ("ROLE_NAME"),
	CONSTRAINT "ROLES_pkey" PRIMARY KEY ("ROLE_ID")
);
CREATE TABLE public."SEQUENCE_TABLE" (
	"SEQUENCE_NAME" varchar(255) NOT NULL,
	"NEXT_VAL" int8 NOT NULL,
	CONSTRAINT "SEQUENCE_TABLE_pkey" PRIMARY KEY ("SEQUENCE_NAME")
);
CREATE TABLE public."SERDES" (
	"SERDE_ID" int8 NOT NULL,
	"NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"SLIB" varchar(4000) NULL DEFAULT NULL::character varying,
	"DESCRIPTION" varchar(4000) NULL,
	"SERIALIZER_CLASS" varchar(4000) NULL,
	"DESERIALIZER_CLASS" varchar(4000) NULL,
	"SERDE_TYPE" int4 NULL,
	CONSTRAINT "SERDES_pkey" PRIMARY KEY ("SERDE_ID")
);
CREATE TABLE public."SKEWED_STRING_LIST" (
	"STRING_LIST_ID" int8 NOT NULL,
	CONSTRAINT "SKEWED_STRING_LIST_pkey" PRIMARY KEY ("STRING_LIST_ID")
);
CREATE TABLE public."TYPES" (
	"TYPES_ID" int8 NOT NULL,
	"TYPE_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"TYPE1" varchar(767) NULL DEFAULT NULL::character varying,
	"TYPE2" varchar(767) NULL DEFAULT NULL::character varying,
	CONSTRAINT "TYPES_pkey" PRIMARY KEY ("TYPES_ID"),
	CONSTRAINT "UNIQUE_TYPE" UNIQUE ("TYPE_NAME")
);
CREATE TABLE public."VERSION" (
	"VER_ID" int8 NOT NULL,
	"SCHEMA_VERSION" varchar(127) NOT NULL,
	"VERSION_COMMENT" varchar(255) NOT NULL,
	CONSTRAINT "VERSION_pkey" PRIMARY KEY ("VER_ID")
);
CREATE TABLE public.aux_table (
	mt_key1 varchar(128) NOT NULL,
	mt_key2 int8 NOT NULL,
	mt_comment varchar(255) NULL,
	CONSTRAINT aux_table_pkey PRIMARY KEY (mt_key1, mt_key2)
);
CREATE TABLE public.compaction_queue (
	cq_id int8 NOT NULL,
	cq_database varchar(128) NOT NULL,
	cq_table varchar(128) NOT NULL,
	cq_partition varchar(767) NULL,
	cq_state bpchar(1) NOT NULL,
	cq_type bpchar(1) NOT NULL,
	cq_tblproperties varchar(2048) NULL,
	cq_worker_id varchar(128) NULL,
	cq_start int8 NULL,
	cq_run_as varchar(128) NULL,
	cq_highest_write_id int8 NULL,
	cq_meta_info bytea NULL,
	cq_hadoop_job_id varchar(32) NULL,
	CONSTRAINT compaction_queue_pkey PRIMARY KEY (cq_id)
);
CREATE TABLE public.completed_compactions (
	cc_id int8 NOT NULL,
	cc_database varchar(128) NOT NULL,
	cc_table varchar(128) NOT NULL,
	cc_partition varchar(767) NULL,
	cc_state bpchar(1) NOT NULL,
	cc_type bpchar(1) NOT NULL,
	cc_tblproperties varchar(2048) NULL,
	cc_worker_id varchar(128) NULL,
	cc_start int8 NULL,
	cc_end int8 NULL,
	cc_run_as varchar(128) NULL,
	cc_highest_write_id int8 NULL,
	cc_meta_info bytea NULL,
	cc_hadoop_job_id varchar(32) NULL,
	CONSTRAINT completed_compactions_pkey PRIMARY KEY (cc_id)
);
CREATE TABLE public.completed_txn_components (
	ctc_txnid int8 NOT NULL,
	ctc_database varchar(128) NOT NULL,
	ctc_table varchar(256) NULL,
	ctc_partition varchar(767) NULL,
	ctc_timestamp timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	ctc_writeid int8 NULL,
	ctc_update_delete bpchar(1) NOT NULL
);
CREATE INDEX completed_txn_components_index ON public.completed_txn_components USING btree (ctc_database, ctc_table, ctc_partition);
CREATE TABLE public.hive_locks (
	hl_lock_ext_id int8 NOT NULL,
	hl_lock_int_id int8 NOT NULL,
	hl_txnid int8 NOT NULL,
	hl_db varchar(128) NOT NULL,
	hl_table varchar(128) NULL,
	hl_partition varchar(767) NULL DEFAULT NULL::character varying,
	hl_lock_state bpchar(1) NOT NULL,
	hl_lock_type bpchar(1) NOT NULL,
	hl_last_heartbeat int8 NOT NULL,
	hl_acquired_at int8 NULL,
	hl_user varchar(128) NOT NULL,
	hl_host varchar(128) NOT NULL,
	hl_heartbeat_count int4 NULL,
	hl_agent_info varchar(128) NULL,
	hl_blockedby_ext_id int8 NULL,
	hl_blockedby_int_id int8 NULL,
	CONSTRAINT hive_locks_pkey PRIMARY KEY (hl_lock_ext_id, hl_lock_int_id)
);
CREATE INDEX hl_txnid_index ON public.hive_locks USING hash (hl_txnid);
CREATE TABLE public.materialization_rebuild_locks (
	mrl_txn_id int8 NOT NULL,
	mrl_db_name varchar(128) NOT NULL,
	mrl_tbl_name varchar(256) NOT NULL,
	mrl_last_heartbeat int8 NOT NULL,
	CONSTRAINT materialization_rebuild_locks_pkey PRIMARY KEY (mrl_txn_id)
);
CREATE TABLE public.min_history_level (
	mhl_txnid int8 NOT NULL,
	mhl_min_open_txnid int8 NOT NULL,
	CONSTRAINT min_history_level_pkey PRIMARY KEY (mhl_txnid)
);
CREATE INDEX min_history_level_idx ON public.min_history_level USING btree (mhl_min_open_txnid);
CREATE TABLE public.next_compaction_queue_id (
	ncq_next int8 NOT NULL
);
CREATE TABLE public.next_lock_id (
	nl_next int8 NOT NULL
);
CREATE TABLE public.next_txn_id (
	ntxn_next int8 NOT NULL
);
CREATE TABLE public.next_write_id (
	nwi_database varchar(128) NOT NULL,
	nwi_table varchar(256) NOT NULL,
	nwi_next int8 NOT NULL
);
CREATE UNIQUE INDEX next_write_id_idx ON public.next_write_id USING btree (nwi_database, nwi_table);
CREATE TABLE public.repl_txn_map (
	rtm_repl_policy varchar(256) NOT NULL,
	rtm_src_txn_id int8 NOT NULL,
	rtm_target_txn_id int8 NOT NULL,
	CONSTRAINT repl_txn_map_pkey PRIMARY KEY (rtm_repl_policy, rtm_src_txn_id)
);
CREATE TABLE public.runtime_stats (
	rs_id int8 NOT NULL,
	create_time int8 NOT NULL,
	weight int8 NOT NULL,
	payload bytea NULL,
	CONSTRAINT runtime_stats_pkey PRIMARY KEY (rs_id)
);
CREATE INDEX idx_runtime_stats_create_time ON public.runtime_stats USING btree (create_time);
CREATE TABLE public.txn_to_write_id (
	t2w_txnid int8 NOT NULL,
	t2w_database varchar(128) NOT NULL,
	t2w_table varchar(256) NOT NULL,
	t2w_writeid int8 NOT NULL
);
CREATE UNIQUE INDEX tbl_to_txn_id_idx ON public.txn_to_write_id USING btree (t2w_database, t2w_table, t2w_txnid);
CREATE UNIQUE INDEX tbl_to_write_id_idx ON public.txn_to_write_id USING btree (t2w_database, t2w_table, t2w_writeid);
CREATE TABLE public.txns (
	txn_id int8 NOT NULL,
	txn_state bpchar(1) NOT NULL,
	txn_started int8 NOT NULL,
	txn_last_heartbeat int8 NOT NULL,
	txn_user varchar(128) NOT NULL,
	txn_host varchar(128) NOT NULL,
	txn_agent_info varchar(128) NULL,
	txn_meta_info varchar(128) NULL,
	txn_heartbeat_count int4 NULL,
	txn_type int4 NULL,
	CONSTRAINT txns_pkey PRIMARY KEY (txn_id)
);
CREATE TABLE public.write_set (
	ws_database varchar(128) NOT NULL,
	ws_table varchar(128) NOT NULL,
	ws_partition varchar(767) NULL,
	ws_txnid int8 NOT NULL,
	ws_commit_id int8 NOT NULL,
	ws_operation_type bpchar(1) NOT NULL
);
CREATE TABLE public."COLUMNS_V2" (
	"CD_ID" int8 NOT NULL,
	"COMMENT" varchar(4000) NULL,
	"COLUMN_NAME" varchar(767) NOT NULL,
	"TYPE_NAME" text NULL,
	"INTEGER_IDX" int4 NOT NULL,
	CONSTRAINT "COLUMNS_V2_pkey" PRIMARY KEY ("CD_ID", "COLUMN_NAME"),
	CONSTRAINT "COLUMNS_V2_CD_ID_fkey" FOREIGN KEY ("CD_ID") REFERENCES public."CDS"("CD_ID") DEFERRABLE
);
CREATE TABLE public."DBS" (
	"DB_ID" int8 NOT NULL,
	"DESC" varchar(4000) NULL DEFAULT NULL::character varying,
	"DB_LOCATION_URI" varchar(4000) NOT NULL,
	"NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"OWNER_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"OWNER_TYPE" varchar(10) NULL DEFAULT NULL::character varying,
	"CTLG_NAME" varchar(256) NULL DEFAULT 'hive'::character varying,
	CONSTRAINT "DBS_pkey" PRIMARY KEY ("DB_ID"),
	CONSTRAINT "UNIQUE_DATABASE" UNIQUE ("NAME", "CTLG_NAME"),
	CONSTRAINT "DBS_FK1" FOREIGN KEY ("CTLG_NAME") REFERENCES public."CTLGS"("NAME")
);
CREATE TABLE public."DB_PRIVS" (
	"DB_GRANT_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"DB_ID" int8 NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"DB_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "DBPRIVILEGEINDEX" UNIQUE ("AUTHORIZER", "DB_ID", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "DB_PRIV", "GRANTOR", "GRANTOR_TYPE"),
	CONSTRAINT "DB_PRIVS_pkey" PRIMARY KEY ("DB_GRANT_ID"),
	CONSTRAINT "DB_PRIVS_DB_ID_fkey" FOREIGN KEY ("DB_ID") REFERENCES public."DBS"("DB_ID") DEFERRABLE
);
CREATE INDEX "DB_PRIVS_N49" ON public."DB_PRIVS" USING btree ("DB_ID");
CREATE TABLE public."FUNCS" (
	"FUNC_ID" int8 NOT NULL,
	"CLASS_NAME" varchar(4000) NULL,
	"CREATE_TIME" int4 NOT NULL,
	"DB_ID" int8 NULL,
	"FUNC_NAME" varchar(128) NULL,
	"FUNC_TYPE" int4 NOT NULL,
	"OWNER_NAME" varchar(128) NULL,
	"OWNER_TYPE" varchar(10) NULL,
	CONSTRAINT "FUNCS_pkey" PRIMARY KEY ("FUNC_ID"),
	CONSTRAINT "FUNCS_FK1" FOREIGN KEY ("DB_ID") REFERENCES public."DBS"("DB_ID") DEFERRABLE
);
CREATE INDEX "FUNCS_N49" ON public."FUNCS" USING btree ("DB_ID");
CREATE UNIQUE INDEX "UNIQUEFUNCTION" ON public."FUNCS" USING btree ("FUNC_NAME", "DB_ID");
CREATE TABLE public."FUNC_RU" (
	"FUNC_ID" int8 NOT NULL,
	"RESOURCE_TYPE" int4 NOT NULL,
	"RESOURCE_URI" varchar(4000) NULL,
	"INTEGER_IDX" int4 NOT NULL,
	CONSTRAINT "FUNC_RU_pkey" PRIMARY KEY ("FUNC_ID", "INTEGER_IDX"),
	CONSTRAINT "FUNC_RU_FK1" FOREIGN KEY ("FUNC_ID") REFERENCES public."FUNCS"("FUNC_ID") DEFERRABLE
);
CREATE INDEX "FUNC_RU_N49" ON public."FUNC_RU" USING btree ("FUNC_ID");
CREATE TABLE public."I_SCHEMA" (
	"SCHEMA_ID" int8 NOT NULL,
	"SCHEMA_TYPE" int4 NOT NULL,
	"NAME" varchar(256) NULL,
	"DB_ID" int8 NULL,
	"COMPATIBILITY" int4 NOT NULL,
	"VALIDATION_LEVEL" int4 NOT NULL,
	"CAN_EVOLVE" bool NOT NULL,
	"SCHEMA_GROUP" varchar(256) NULL,
	"DESCRIPTION" varchar(4000) NULL,
	CONSTRAINT "I_SCHEMA_NAME_key" UNIQUE ("NAME"),
	CONSTRAINT "I_SCHEMA_pkey" PRIMARY KEY ("SCHEMA_ID"),
	CONSTRAINT "I_SCHEMA_DB_ID_fkey" FOREIGN KEY ("DB_ID") REFERENCES public."DBS"("DB_ID")
);
CREATE TABLE public."ROLE_MAP" (
	"ROLE_GRANT_ID" int8 NOT NULL,
	"ADD_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"ROLE_ID" int8 NULL,
	CONSTRAINT "ROLE_MAP_pkey" PRIMARY KEY ("ROLE_GRANT_ID"),
	CONSTRAINT "USERROLEMAPINDEX" UNIQUE ("PRINCIPAL_NAME", "ROLE_ID", "GRANTOR", "GRANTOR_TYPE"),
	CONSTRAINT "ROLE_MAP_ROLE_ID_fkey" FOREIGN KEY ("ROLE_ID") REFERENCES public."ROLES"("ROLE_ID") DEFERRABLE
);
CREATE INDEX "ROLE_MAP_N49" ON public."ROLE_MAP" USING btree ("ROLE_ID");
CREATE TABLE public."SCHEMA_VERSION" (
	"SCHEMA_VERSION_ID" int8 NOT NULL,
	"SCHEMA_ID" int8 NULL,
	"VERSION" int4 NOT NULL,
	"CREATED_AT" int8 NOT NULL,
	"CD_ID" int8 NULL,
	"STATE" int4 NOT NULL,
	"DESCRIPTION" varchar(4000) NULL,
	"SCHEMA_TEXT" text NULL,
	"FINGERPRINT" varchar(256) NULL,
	"SCHEMA_VERSION_NAME" varchar(256) NULL,
	"SERDE_ID" int8 NULL,
	CONSTRAINT "SCHEMA_VERSION_SCHEMA_ID_VERSION_key" UNIQUE ("SCHEMA_ID", "VERSION"),
	CONSTRAINT "SCHEMA_VERSION_pkey" PRIMARY KEY ("SCHEMA_VERSION_ID"),
	CONSTRAINT "SCHEMA_VERSION_CD_ID_fkey" FOREIGN KEY ("CD_ID") REFERENCES public."CDS"("CD_ID"),
	CONSTRAINT "SCHEMA_VERSION_SCHEMA_ID_fkey" FOREIGN KEY ("SCHEMA_ID") REFERENCES public."I_SCHEMA"("SCHEMA_ID"),
	CONSTRAINT "SCHEMA_VERSION_SERDE_ID_fkey" FOREIGN KEY ("SERDE_ID") REFERENCES public."SERDES"("SERDE_ID")
);
CREATE TABLE public."SDS" (
	"SD_ID" int8 NOT NULL,
	"INPUT_FORMAT" varchar(4000) NULL DEFAULT NULL::character varying,
	"IS_COMPRESSED" bool NOT NULL,
	"LOCATION" varchar(4000) NULL DEFAULT NULL::character varying,
	"NUM_BUCKETS" int8 NOT NULL,
	"OUTPUT_FORMAT" varchar(4000) NULL DEFAULT NULL::character varying,
	"SERDE_ID" int8 NULL,
	"CD_ID" int8 NULL,
	"IS_STOREDASSUBDIRECTORIES" bool NOT NULL,
	CONSTRAINT "SDS_pkey" PRIMARY KEY ("SD_ID"),
	CONSTRAINT "SDS_CD_ID_fkey" FOREIGN KEY ("CD_ID") REFERENCES public."CDS"("CD_ID") DEFERRABLE,
	CONSTRAINT "SDS_SERDE_ID_fkey" FOREIGN KEY ("SERDE_ID") REFERENCES public."SERDES"("SERDE_ID") DEFERRABLE
);
CREATE INDEX "SDS_N49" ON public."SDS" USING btree ("SERDE_ID");
CREATE TABLE public."SD_PARAMS" (
	"SD_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(256) NOT NULL,
	"PARAM_VALUE" text NULL,
	CONSTRAINT "SD_PARAMS_pkey" PRIMARY KEY ("SD_ID", "PARAM_KEY"),
	CONSTRAINT "SD_PARAMS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE INDEX "SD_PARAMS_N49" ON public."SD_PARAMS" USING btree ("SD_ID");
CREATE TABLE public."SERDE_PARAMS" (
	"SERDE_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(256) NOT NULL,
	"PARAM_VALUE" text NULL,
	CONSTRAINT "SERDE_PARAMS_pkey" PRIMARY KEY ("SERDE_ID", "PARAM_KEY"),
	CONSTRAINT "SERDE_PARAMS_SERDE_ID_fkey" FOREIGN KEY ("SERDE_ID") REFERENCES public."SERDES"("SERDE_ID") DEFERRABLE
);
CREATE INDEX "SERDE_PARAMS_N49" ON public."SERDE_PARAMS" USING btree ("SERDE_ID");
CREATE TABLE public."SKEWED_COL_NAMES" (
	"SD_ID" int8 NOT NULL,
	"SKEWED_COL_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "SKEWED_COL_NAMES_pkey" PRIMARY KEY ("SD_ID", "INTEGER_IDX"),
	CONSTRAINT "SKEWED_COL_NAMES_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE TABLE public."SKEWED_COL_VALUE_LOC_MAP" (
	"SD_ID" int8 NOT NULL,
	"STRING_LIST_ID_KID" int8 NOT NULL,
	"LOCATION" varchar(4000) NULL DEFAULT NULL::character varying,
	CONSTRAINT "SKEWED_COL_VALUE_LOC_MAP_pkey" PRIMARY KEY ("SD_ID", "STRING_LIST_ID_KID"),
	CONSTRAINT "SKEWED_COL_VALUE_LOC_MAP_fkey1" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE,
	CONSTRAINT "SKEWED_COL_VALUE_LOC_MAP_fkey2" FOREIGN KEY ("STRING_LIST_ID_KID") REFERENCES public."SKEWED_STRING_LIST"("STRING_LIST_ID") DEFERRABLE
);
CREATE TABLE public."SKEWED_STRING_LIST_VALUES" (
	"STRING_LIST_ID" int8 NOT NULL,
	"STRING_LIST_VALUE" varchar(256) NULL DEFAULT NULL::character varying,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "SKEWED_STRING_LIST_VALUES_pkey" PRIMARY KEY ("STRING_LIST_ID", "INTEGER_IDX"),
	CONSTRAINT "SKEWED_STRING_LIST_VALUES_fkey" FOREIGN KEY ("STRING_LIST_ID") REFERENCES public."SKEWED_STRING_LIST"("STRING_LIST_ID") DEFERRABLE
);
CREATE TABLE public."SKEWED_VALUES" (
	"SD_ID_OID" int8 NOT NULL,
	"STRING_LIST_ID_EID" int8 NOT NULL,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "SKEWED_VALUES_pkey" PRIMARY KEY ("SD_ID_OID", "INTEGER_IDX"),
	CONSTRAINT "SKEWED_VALUES_fkey1" FOREIGN KEY ("STRING_LIST_ID_EID") REFERENCES public."SKEWED_STRING_LIST"("STRING_LIST_ID") DEFERRABLE,
	CONSTRAINT "SKEWED_VALUES_fkey2" FOREIGN KEY ("SD_ID_OID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE TABLE public."SORT_COLS" (
	"SD_ID" int8 NOT NULL,
	"COLUMN_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"ORDER" int8 NOT NULL,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "SORT_COLS_pkey" PRIMARY KEY ("SD_ID", "INTEGER_IDX"),
	CONSTRAINT "SORT_COLS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE INDEX "SORT_COLS_N49" ON public."SORT_COLS" USING btree ("SD_ID");
CREATE TABLE public."TBLS" (
	"TBL_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"DB_ID" int8 NULL,
	"LAST_ACCESS_TIME" int8 NOT NULL,
	"OWNER" varchar(767) NULL DEFAULT NULL::character varying,
	"OWNER_TYPE" varchar(10) NULL DEFAULT NULL::character varying,
	"RETENTION" int8 NOT NULL,
	"SD_ID" int8 NULL,
	"TBL_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"TBL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"VIEW_EXPANDED_TEXT" text NULL,
	"VIEW_ORIGINAL_TEXT" text NULL,
	"IS_REWRITE_ENABLED" bool NOT NULL DEFAULT false,
	CONSTRAINT "TBLS_pkey" PRIMARY KEY ("TBL_ID"),
	CONSTRAINT "UNIQUETABLE" UNIQUE ("TBL_NAME", "DB_ID"),
	CONSTRAINT "TBLS_DB_ID_fkey" FOREIGN KEY ("DB_ID") REFERENCES public."DBS"("DB_ID") DEFERRABLE,
	CONSTRAINT "TBLS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE INDEX "TBLS_N49" ON public."TBLS" USING btree ("DB_ID");
CREATE INDEX "TBLS_N50" ON public."TBLS" USING btree ("SD_ID");
CREATE TABLE public."TBL_COL_PRIVS" (
	"TBL_COLUMN_GRANT_ID" int8 NOT NULL,
	"COLUMN_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"CREATE_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"TBL_COL_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"TBL_ID" int8 NULL,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "TBL_COL_PRIVS_pkey" PRIMARY KEY ("TBL_COLUMN_GRANT_ID"),
	CONSTRAINT "TBL_COL_PRIVS_TBL_ID_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "TABLECOLUMNPRIVILEGEINDEX" ON public."TBL_COL_PRIVS" USING btree ("AUTHORIZER", "TBL_ID", "COLUMN_NAME", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "TBL_COL_PRIV", "GRANTOR", "GRANTOR_TYPE");
CREATE INDEX "TBL_COL_PRIVS_N49" ON public."TBL_COL_PRIVS" USING btree ("TBL_ID");
CREATE TABLE public."TBL_PRIVS" (
	"TBL_GRANT_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"TBL_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"TBL_ID" int8 NULL,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "TBL_PRIVS_pkey" PRIMARY KEY ("TBL_GRANT_ID"),
	CONSTRAINT "TBL_PRIVS_TBL_ID_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "TABLEPRIVILEGEINDEX" ON public."TBL_PRIVS" USING btree ("AUTHORIZER", "TBL_ID", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "TBL_PRIV", "GRANTOR", "GRANTOR_TYPE");
CREATE INDEX "TBL_PRIVS_N49" ON public."TBL_PRIVS" USING btree ("TBL_ID");
CREATE TABLE public."TYPE_FIELDS" (
	"TYPE_NAME" int8 NOT NULL,
	"COMMENT" varchar(256) NULL DEFAULT NULL::character varying,
	"FIELD_NAME" varchar(128) NOT NULL,
	"FIELD_TYPE" varchar(767) NOT NULL,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "TYPE_FIELDS_pkey" PRIMARY KEY ("TYPE_NAME", "FIELD_NAME"),
	CONSTRAINT "TYPE_FIELDS_TYPE_NAME_fkey" FOREIGN KEY ("TYPE_NAME") REFERENCES public."TYPES"("TYPES_ID") DEFERRABLE
);
CREATE INDEX "TYPE_FIELDS_N49" ON public."TYPE_FIELDS" USING btree ("TYPE_NAME");
CREATE TABLE public.txn_components (
	tc_txnid int8 NOT NULL,
	tc_database varchar(128) NOT NULL,
	tc_table varchar(128) NULL,
	tc_partition varchar(767) NULL DEFAULT NULL::character varying,
	tc_operation_type bpchar(1) NOT NULL,
	tc_writeid int8 NULL,
	CONSTRAINT txn_components_tc_txnid_fkey FOREIGN KEY (tc_txnid) REFERENCES public.txns(txn_id)
);
CREATE INDEX tc_txnid_index ON public.txn_components USING hash (tc_txnid);
CREATE TABLE public."BUCKETING_COLS" (
	"SD_ID" int8 NOT NULL,
	"BUCKET_COL_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "BUCKETING_COLS_pkey" PRIMARY KEY ("SD_ID", "INTEGER_IDX"),
	CONSTRAINT "BUCKETING_COLS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE INDEX "BUCKETING_COLS_N49" ON public."BUCKETING_COLS" USING btree ("SD_ID");
CREATE TABLE public."DATABASE_PARAMS" (
	"DB_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(180) NOT NULL,
	"PARAM_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	CONSTRAINT "DATABASE_PARAMS_pkey" PRIMARY KEY ("DB_ID", "PARAM_KEY"),
	CONSTRAINT "DATABASE_PARAMS_DB_ID_fkey" FOREIGN KEY ("DB_ID") REFERENCES public."DBS"("DB_ID") DEFERRABLE
);
CREATE INDEX "DATABASE_PARAMS_N49" ON public."DATABASE_PARAMS" USING btree ("DB_ID");
CREATE TABLE public."IDXS" (
	"INDEX_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"DEFERRED_REBUILD" bool NOT NULL,
	"INDEX_HANDLER_CLASS" varchar(4000) NULL DEFAULT NULL::character varying,
	"INDEX_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"INDEX_TBL_ID" int8 NULL,
	"LAST_ACCESS_TIME" int8 NOT NULL,
	"ORIG_TBL_ID" int8 NULL,
	"SD_ID" int8 NULL,
	CONSTRAINT "IDXS_pkey" PRIMARY KEY ("INDEX_ID"),
	CONSTRAINT "UNIQUEINDEX" UNIQUE ("INDEX_NAME", "ORIG_TBL_ID"),
	CONSTRAINT "IDXS_INDEX_TBL_ID_fkey" FOREIGN KEY ("INDEX_TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE,
	CONSTRAINT "IDXS_ORIG_TBL_ID_fkey" FOREIGN KEY ("ORIG_TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE,
	CONSTRAINT "IDXS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE
);
CREATE INDEX "IDXS_N49" ON public."IDXS" USING btree ("ORIG_TBL_ID");
CREATE INDEX "IDXS_N50" ON public."IDXS" USING btree ("INDEX_TBL_ID");
CREATE INDEX "IDXS_N51" ON public."IDXS" USING btree ("SD_ID");
CREATE TABLE public."INDEX_PARAMS" (
	"INDEX_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(256) NOT NULL,
	"PARAM_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	CONSTRAINT "INDEX_PARAMS_pkey" PRIMARY KEY ("INDEX_ID", "PARAM_KEY"),
	CONSTRAINT "INDEX_PARAMS_INDEX_ID_fkey" FOREIGN KEY ("INDEX_ID") REFERENCES public."IDXS"("INDEX_ID") DEFERRABLE
);
CREATE INDEX "INDEX_PARAMS_N49" ON public."INDEX_PARAMS" USING btree ("INDEX_ID");
CREATE TABLE public."MV_TABLES_USED" (
	"MV_CREATION_METADATA_ID" int8 NOT NULL,
	"TBL_ID" int8 NOT NULL,
	CONSTRAINT "MV_TABLES_USED_FK1" FOREIGN KEY ("MV_CREATION_METADATA_ID") REFERENCES public."MV_CREATION_METADATA"("MV_CREATION_METADATA_ID") DEFERRABLE,
	CONSTRAINT "MV_TABLES_USED_FK2" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE TABLE public."PARTITIONS" (
	"PART_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"LAST_ACCESS_TIME" int8 NOT NULL,
	"PART_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"SD_ID" int8 NULL,
	"TBL_ID" int8 NULL,
	CONSTRAINT "PARTITIONS_pkey" PRIMARY KEY ("PART_ID"),
	CONSTRAINT "UNIQUEPARTITION" UNIQUE ("PART_NAME", "TBL_ID"),
	CONSTRAINT "PARTITIONS_SD_ID_fkey" FOREIGN KEY ("SD_ID") REFERENCES public."SDS"("SD_ID") DEFERRABLE,
	CONSTRAINT "PARTITIONS_TBL_ID_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "PARTITIONS_N49" ON public."PARTITIONS" USING btree ("TBL_ID");
CREATE INDEX "PARTITIONS_N50" ON public."PARTITIONS" USING btree ("SD_ID");
CREATE TABLE public."PARTITION_KEYS" (
	"TBL_ID" int8 NOT NULL,
	"PKEY_COMMENT" varchar(4000) NULL DEFAULT NULL::character varying,
	"PKEY_NAME" varchar(128) NOT NULL,
	"PKEY_TYPE" varchar(767) NOT NULL,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "PARTITION_KEYS_pkey" PRIMARY KEY ("TBL_ID", "PKEY_NAME"),
	CONSTRAINT "PARTITION_KEYS_TBL_ID_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "PARTITION_KEYS_N49" ON public."PARTITION_KEYS" USING btree ("TBL_ID");
CREATE TABLE public."PARTITION_KEY_VALS" (
	"PART_ID" int8 NOT NULL,
	"PART_KEY_VAL" varchar(256) NULL DEFAULT NULL::character varying,
	"INTEGER_IDX" int8 NOT NULL,
	CONSTRAINT "PARTITION_KEY_VALS_pkey" PRIMARY KEY ("PART_ID", "INTEGER_IDX"),
	CONSTRAINT "PARTITION_KEY_VALS_PART_ID_fkey" FOREIGN KEY ("PART_ID") REFERENCES public."PARTITIONS"("PART_ID") DEFERRABLE
);
CREATE INDEX "PARTITION_KEY_VALS_N49" ON public."PARTITION_KEY_VALS" USING btree ("PART_ID");
CREATE TABLE public."PARTITION_PARAMS" (
	"PART_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(256) NOT NULL,
	"PARAM_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	CONSTRAINT "PARTITION_PARAMS_pkey" PRIMARY KEY ("PART_ID", "PARAM_KEY"),
	CONSTRAINT "PARTITION_PARAMS_PART_ID_fkey" FOREIGN KEY ("PART_ID") REFERENCES public."PARTITIONS"("PART_ID") DEFERRABLE
);
CREATE INDEX "PARTITION_PARAMS_N49" ON public."PARTITION_PARAMS" USING btree ("PART_ID");
CREATE TABLE public."PART_COL_PRIVS" (
	"PART_COLUMN_GRANT_ID" int8 NOT NULL,
	"COLUMN_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"CREATE_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PART_ID" int8 NULL,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PART_COL_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "PART_COL_PRIVS_pkey" PRIMARY KEY ("PART_COLUMN_GRANT_ID"),
	CONSTRAINT "PART_COL_PRIVS_PART_ID_fkey" FOREIGN KEY ("PART_ID") REFERENCES public."PARTITIONS"("PART_ID") DEFERRABLE
);
CREATE INDEX "PARTITIONCOLUMNPRIVILEGEINDEX" ON public."PART_COL_PRIVS" USING btree ("AUTHORIZER", "PART_ID", "COLUMN_NAME", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "PART_COL_PRIV", "GRANTOR", "GRANTOR_TYPE");
CREATE INDEX "PART_COL_PRIVS_N49" ON public."PART_COL_PRIVS" USING btree ("PART_ID");
CREATE TABLE public."PART_COL_STATS" (
	"CS_ID" int8 NOT NULL,
	"CAT_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"DB_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"TABLE_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"PARTITION_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"COLUMN_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"COLUMN_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PART_ID" int8 NOT NULL,
	"LONG_LOW_VALUE" int8 NULL,
	"LONG_HIGH_VALUE" int8 NULL,
	"DOUBLE_LOW_VALUE" float8 NULL,
	"DOUBLE_HIGH_VALUE" float8 NULL,
	"BIG_DECIMAL_LOW_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	"BIG_DECIMAL_HIGH_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	"NUM_NULLS" int8 NOT NULL,
	"NUM_DISTINCTS" int8 NULL,
	"BIT_VECTOR" bytea NULL,
	"AVG_COL_LEN" float8 NULL,
	"MAX_COL_LEN" int8 NULL,
	"NUM_TRUES" int8 NULL,
	"NUM_FALSES" int8 NULL,
	"LAST_ANALYZED" int8 NOT NULL,
	CONSTRAINT "PART_COL_STATS_pkey" PRIMARY KEY ("CS_ID"),
	CONSTRAINT "PART_COL_STATS_fkey" FOREIGN KEY ("PART_ID") REFERENCES public."PARTITIONS"("PART_ID") DEFERRABLE
);
CREATE INDEX "PART_COL_STATS_N49" ON public."PART_COL_STATS" USING btree ("PART_ID");
CREATE INDEX "PCS_STATS_IDX" ON public."PART_COL_STATS" USING btree ("CAT_NAME", "DB_NAME", "TABLE_NAME", "COLUMN_NAME", "PARTITION_NAME");
CREATE TABLE public."PART_PRIVS" (
	"PART_GRANT_ID" int8 NOT NULL,
	"CREATE_TIME" int8 NOT NULL,
	"GRANT_OPTION" int2 NOT NULL,
	"GRANTOR" varchar(128) NULL DEFAULT NULL::character varying,
	"GRANTOR_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PART_ID" int8 NULL,
	"PRINCIPAL_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"PRINCIPAL_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"PART_PRIV" varchar(128) NULL DEFAULT NULL::character varying,
	"AUTHORIZER" varchar(128) NULL DEFAULT NULL::character varying,
	CONSTRAINT "PART_PRIVS_pkey" PRIMARY KEY ("PART_GRANT_ID"),
	CONSTRAINT "PART_PRIVS_PART_ID_fkey" FOREIGN KEY ("PART_ID") REFERENCES public."PARTITIONS"("PART_ID") DEFERRABLE
);
CREATE INDEX "PARTPRIVILEGEINDEX" ON public."PART_PRIVS" USING btree ("AUTHORIZER", "PART_ID", "PRINCIPAL_NAME", "PRINCIPAL_TYPE", "PART_PRIV", "GRANTOR", "GRANTOR_TYPE");
CREATE INDEX "PART_PRIVS_N49" ON public."PART_PRIVS" USING btree ("PART_ID");
CREATE TABLE public."TABLE_PARAMS" (
	"TBL_ID" int8 NOT NULL,
	"PARAM_KEY" varchar(256) NOT NULL,
	"PARAM_VALUE" text NULL,
	CONSTRAINT "TABLE_PARAMS_pkey" PRIMARY KEY ("TBL_ID", "PARAM_KEY"),
	CONSTRAINT "TABLE_PARAMS_TBL_ID_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "TABLE_PARAMS_N49" ON public."TABLE_PARAMS" USING btree ("TBL_ID");
CREATE TABLE public."TAB_COL_STATS" (
	"CS_ID" int8 NOT NULL,
	"CAT_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"DB_NAME" varchar(128) NULL DEFAULT NULL::character varying,
	"TABLE_NAME" varchar(256) NULL DEFAULT NULL::character varying,
	"COLUMN_NAME" varchar(767) NULL DEFAULT NULL::character varying,
	"COLUMN_TYPE" varchar(128) NULL DEFAULT NULL::character varying,
	"TBL_ID" int8 NOT NULL,
	"LONG_LOW_VALUE" int8 NULL,
	"LONG_HIGH_VALUE" int8 NULL,
	"DOUBLE_LOW_VALUE" float8 NULL,
	"DOUBLE_HIGH_VALUE" float8 NULL,
	"BIG_DECIMAL_LOW_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	"BIG_DECIMAL_HIGH_VALUE" varchar(4000) NULL DEFAULT NULL::character varying,
	"NUM_NULLS" int8 NOT NULL,
	"NUM_DISTINCTS" int8 NULL,
	"BIT_VECTOR" bytea NULL,
	"AVG_COL_LEN" float8 NULL,
	"MAX_COL_LEN" int8 NULL,
	"NUM_TRUES" int8 NULL,
	"NUM_FALSES" int8 NULL,
	"LAST_ANALYZED" int8 NOT NULL,
	CONSTRAINT "TAB_COL_STATS_pkey" PRIMARY KEY ("CS_ID"),
	CONSTRAINT "TAB_COL_STATS_fkey" FOREIGN KEY ("TBL_ID") REFERENCES public."TBLS"("TBL_ID") DEFERRABLE
);
CREATE INDEX "TAB_COL_STATS_IDX" ON public."TAB_COL_STATS" USING btree ("CAT_NAME", "DB_NAME", "TABLE_NAME", "COLUMN_NAME");
CREATE INDEX "TAB_COL_STATS_N49" ON public."TAB_COL_STATS" USING btree ("TBL_ID");
CREATE TABLE public."WM_MAPPING" (
	"MAPPING_ID" int8 NOT NULL,
	"RP_ID" int8 NOT NULL,
	"ENTITY_TYPE" varchar(128) NOT NULL,
	"ENTITY_NAME" varchar(128) NOT NULL,
	"POOL_ID" int8 NULL,
	"ORDERING" int4 NULL,
	CONSTRAINT "UNIQUE_WM_MAPPING" UNIQUE ("RP_ID", "ENTITY_TYPE", "ENTITY_NAME"),
	CONSTRAINT "WM_MAPPING_pkey" PRIMARY KEY ("MAPPING_ID")
);
CREATE TABLE public."WM_POOL" (
	"POOL_ID" int8 NOT NULL,
	"RP_ID" int8 NOT NULL,
	"PATH" varchar(1024) NOT NULL,
	"ALLOC_FRACTION" float8 NULL,
	"QUERY_PARALLELISM" int4 NULL,
	"SCHEDULING_POLICY" varchar(1024) NULL,
	CONSTRAINT "UNIQUE_WM_POOL" UNIQUE ("RP_ID", "PATH"),
	CONSTRAINT "WM_POOL_pkey" PRIMARY KEY ("POOL_ID")
);
CREATE TABLE public."WM_POOL_TO_TRIGGER" (
	"POOL_ID" int8 NOT NULL,
	"TRIGGER_ID" int8 NOT NULL,
	CONSTRAINT "WM_POOL_TO_TRIGGER_pkey" PRIMARY KEY ("POOL_ID", "TRIGGER_ID")
);
CREATE TABLE public."WM_RESOURCEPLAN" (
	"RP_ID" int8 NOT NULL,
	"NAME" varchar(128) NOT NULL,
	"QUERY_PARALLELISM" int4 NULL,
	"STATUS" varchar(20) NOT NULL,
	"DEFAULT_POOL_ID" int8 NULL,
	CONSTRAINT "UNIQUE_WM_RESOURCEPLAN" UNIQUE ("NAME"),
	CONSTRAINT "WM_RESOURCEPLAN_pkey" PRIMARY KEY ("RP_ID")
);
CREATE TABLE public."WM_TRIGGER" (
	"TRIGGER_ID" int8 NOT NULL,
	"RP_ID" int8 NOT NULL,
	"NAME" varchar(128) NOT NULL,
	"TRIGGER_EXPRESSION" varchar(1024) NULL DEFAULT NULL::character varying,
	"ACTION_EXPRESSION" varchar(1024) NULL DEFAULT NULL::character varying,
	"IS_IN_UNMANAGED" int2 NOT NULL DEFAULT 0,
	CONSTRAINT "UNIQUE_WM_TRIGGER" UNIQUE ("RP_ID", "NAME"),
	CONSTRAINT "WM_TRIGGER_pkey" PRIMARY KEY ("TRIGGER_ID")
);
ALTER TABLE public."WM_MAPPING" ADD CONSTRAINT "WM_MAPPING_FK1" FOREIGN KEY ("RP_ID") REFERENCES public."WM_RESOURCEPLAN"("RP_ID") DEFERRABLE;
ALTER TABLE public."WM_MAPPING" ADD CONSTRAINT "WM_MAPPING_FK2" FOREIGN KEY ("POOL_ID") REFERENCES public."WM_POOL"("POOL_ID") DEFERRABLE;
ALTER TABLE public."WM_POOL" ADD CONSTRAINT "WM_POOL_FK1" FOREIGN KEY ("RP_ID") REFERENCES public."WM_RESOURCEPLAN"("RP_ID") DEFERRABLE;
ALTER TABLE public."WM_POOL_TO_TRIGGER" ADD CONSTRAINT "WM_POOL_TO_TRIGGER_FK1" FOREIGN KEY ("POOL_ID") REFERENCES public."WM_POOL"("POOL_ID") DEFERRABLE;
ALTER TABLE public."WM_POOL_TO_TRIGGER" ADD CONSTRAINT "WM_POOL_TO_TRIGGER_FK2" FOREIGN KEY ("TRIGGER_ID") REFERENCES public."WM_TRIGGER"("TRIGGER_ID") DEFERRABLE;
ALTER TABLE public."WM_RESOURCEPLAN" ADD CONSTRAINT "WM_RESOURCEPLAN_FK1" FOREIGN KEY ("DEFAULT_POOL_ID") REFERENCES public."WM_POOL"("POOL_ID") DEFERRABLE;
ALTER TABLE public."WM_TRIGGER" ADD CONSTRAINT "WM_TRIGGER_FK1" FOREIGN KEY ("RP_ID") REFERENCES public."WM_RESOURCEPLAN"("RP_ID") DEFERRABLE;```